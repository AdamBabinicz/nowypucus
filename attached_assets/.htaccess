RewriteEngine On

# Przekierowanie z www na bez www
RewriteCond %{HTTP_HOST} ^www\.pranie-dywanow\.j\.pl [NC]
RewriteRule ^(.*)$ https://pranie-dywanow.j.pl/$1 [L,R=301]

# Przekierowania dla konkretnych podstron
RewriteRule ^oferta-na-pranie-dywanow-wykladzin-tapicerki-meblowej$ oferta.html [L,NC]
RewriteRule ^pierzemy-dywany-wykladziny-tapicerka-meblowa$ firma.html [L,NC]
RewriteRule ^uslugi-prania-dywanow-wykladzin-tapicerki-meblowej$ sprzet.html [L,NC]
RewriteRule ^zamow-pranie-dywanow-wykladzin-tapicerki-meblowej$ kontakt.html [L,NC]
RewriteRule ^czyszczenie-i-usuwanie-plam-z-dywanow-wykladzin-tapicerki-meblowej$ dywany.html [L,NC]
RewriteRule ^czyszczenie-kostki-brukowej-wykladzin-tapicerki-meblowej$ kostka.html [L,NC]
RewriteRule ^czyszczenie-tapicerki-meblowej-dywanow-wykladzin-oraz-kostki-brukowej$ meble.html [L,NC]

# Wymuszenie HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Wyłączenie przeglądania katalogów
Options -Indexes

# Kompresja plików
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/javascript application/json
  AddOutputFilterByType DEFLATE font/ttf font/otf font/woff font/woff2
</IfModule>

# Dodanie nagłówka Vary
<IfModule mod_headers.c>
  Header append Vary "Accept-Encoding"
</IfModule>

# Nagłówki Cache-Control
<IfModule mod_headers.c>
  <FilesMatch "\.(ico|jpe?g|png|gif|swf|css|woff|woff2|ttf|otf|avif)$">
    Header set Cache-Control "public, max-age=31536000"
    Header set Access-Control-Allow-Origin "*"
  </FilesMatch>
  <FilesMatch "\.(js|html?|php)$">
    Header set Cache-Control "private, must-revalidate, max-age=2592000"
  </FilesMatch>
</IfModule>

# Wymuszenie HSTS (HTTP Strict Transport Security)
<IfModule mod_headers.c>
  Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
</IfModule>

# Blokowanie niechcianych botów
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR]
RewriteCond %{HTTP_USER_AGENT} ^HTTrack [NC]
RewriteRule ^.* - [F,L]

# Domyślne kodowanie
AddDefaultCharset utf-8

# Przekierowanie z index.html na root (bez index.html w URL)
RewriteCond %{THE_REQUEST} /index\.html [NC]
RewriteRule ^index\.html$ / [L,R=301]

# Ustawienie właściwego typu MIME dla plików AVIF
AddType image/avif .avif
